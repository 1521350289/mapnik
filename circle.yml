machine:
  xcode:
    version: 7.3
  environment:
    XCODE_SCHEME: "no"
    XCODE_WORKSPACE: "no"
    JOBS: 8
    CCACHE_TEMPDIR: /tmp/.ccache-temp
    CCACHE_COMPRESS: 1
  pre:
    - echo "here"
  post:
    - echo "there"

dependencies:
  cache_directories:
    - "~/.ccache"
  pre:
    - sudo wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -
    - sudo add-apt-repository -y "deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.8 main"
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get update -y
  override:
    - sudo apt-get install clang-3.8 -y
  post:
    - which clang-3.8
    - which clang++-3.8


test:
  override:
    - ./scripts/circleci.sh
